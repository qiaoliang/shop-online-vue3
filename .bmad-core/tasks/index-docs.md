# 索引文档任务

## 目的

此任务通过扫描所有文档文件并确保它们已正确索引并带有描述，从而维护 `docs/index.md` 文件的完整性和完整性。它处理根级文档和子文件夹中的文档，并按层次结构组织它们。

## 任务说明

您现在作为文档索引器操作。您的目标是确保所有文档文件都已正确编目到中心索引中，并为子文件夹进行适当组织。

### 必需步骤

1. 首先，定位并扫描：

   - `docs/` 目录和所有子目录
   - 现有的 `docs/index.md` 文件（如果不存在则创建）
   - 文档结构中的所有 markdown (`.md`) 和文本 (`.txt`) 文件
   - 注意文件夹结构以进行分层组织

2. 对于现有的 `docs/index.md`：

   - 解析当前条目
   - 注意现有文件引用和描述
   - 识别任何损坏的链接或缺失的文件
   - 跟踪已索引的内容
   - 保留现有文件夹部分

3. 对于找到的每个文档文件：

   - 提取标题（从第一个标题或文件名）
   - 通过分析内容生成简要描述
   - 创建指向文件的相对 markdown 链接
   - 检查它是否已在索引中
   - 注意它属于哪个文件夹（如果在子文件夹中）
   - 如果缺失或过时，准备更新

4. 对于索引中发现的任何缺失或不存在的文件：

   - 呈现引用不存在的所有条目列表
   - 对于每个条目：
     - 显示完整的条目详细信息（标题、路径、描述）
     - 在删除前请求明确确认
     - 提供更新路径的选项（如果文件已移动）
     - 记录最终报告的决定（删除/更新/保留）

5. 更新 `docs/index.md`：
   - 维护现有结构和组织
   - 为每个子文件夹创建二级标题 (`##`)
   - 首先列出根级文档
   - 添加带有描述的缺失条目
   - 更新过时的条目
   - 仅删除已确认删除的条目
   - 确保整个格式一致

### 索引结构格式

索引应按以下方式组织：

```markdown
# 文档索引

## 根文档

### [文档标题](./document.md)

文档目的和内容的简要描述。

### [另一个文档](./another.md)

此处描述。

## 文件夹名称

`folder-name/` 目录中的文档：

### [文件夹中的文档](./folder-name/document.md)

此文档的描述。

### [文件夹中的另一个](./folder-name/another.md)

此处描述。

## 另一个文件夹

`another-folder/` 目录中的文档：

### [嵌套文档](./another-folder/document.md)

嵌套文档的描述。

```

### 索引条目格式

每个条目应遵循此格式：

```markdown
### [文档标题](relative/path/to/file.md)

文档目的和内容的简要描述。
```

### 操作规则

1. 绝不修改索引文件的内容
2. 当 index.md 中的现有描述足够时，保留它们
3. 维护索引中任何现有的分类或分组
4. 所有链接使用相对路径（以 `./` 开头）
5. 确保描述简洁但信息丰富
6. 绝不未经明确确认删除条目
7. 报告发现的任何损坏链接或不一致
8. 在考虑删除之前，允许更新移动文件的路径
9. 使用二级标题 (`##`) 创建文件夹部分
10. 文件夹按字母顺序排序，根文档首先列出
11. 在每个部分中，文档按标题字母顺序排序

### 流程输出

任务将提供：

1. index.md 更改摘要
2. 新索引文件列表（按文件夹组织）
3. 更新条目列表
4. 呈现删除的条目列表及其状态：
   - 已确认删除
   - 已更新路径
   - 尽管文件缺失但仍保留
5. 发现的任何新文件夹
6. 发现的任何其他问题或不一致

### 处理缺失文件

对于索引中引用但文件系统中未找到的每个文件：

1. 呈现条目：

   ```markdown
   检测到缺失文件：
   标题：[文档标题]
   路径：relative/path/to/file.md
   描述：现有描述
   部分：[根文档 | 文件夹名称]

   选项：

   1. 删除此条目
   2. 更新文件路径
   3. 保留条目（标记为暂时不可用）

   请选择一个选项 (1/2/3)：
   ```

2. 在采取任何行动之前等待用户确认
3. 记录最终报告的决定

### 特殊情况

1. **分片文档**：如果文件夹包含 `index.md` 文件，则将其视为分片文档：

   - 使用文件夹的 `index.md` 标题作为节标题
   - 将文件夹的文档列为子节
   - 在描述中注明这是一个多部分文档

2. **README 文件**：根据内容将 `README.md` 转换为更具描述性的标题

3. **嵌套子文件夹**：对于深度嵌套的文件夹，维护层次结构，但主索引中限制为 2 级。更深的结构应有自己的索引文件。

## 必需输入

请提供：

1. `docs/` 目录的位置（默认：`./docs`）
2. 确认对 `docs/index.md` 的写入权限
3. 任何特定的分类偏好
4. 要从索引中排除的任何文件或目录（例如，`.git`、`node_modules`）
5. 是否包含隐藏文件/文件夹（以 `.` 开头）

您想继续进行文档索引吗？请提供上述所需输入。