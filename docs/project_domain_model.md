## 核心领域模型

### 领域模型概述

本项目前端的核心领域模型主要围绕电商业务流程中的关键实体展开，包括商品、订单、用户、积分等。这些模型在前端主要表现为数据结构定义、数据转换函数以及与后端 API 交互时的数据载体。它们定义了前端如何理解、处理和展示从后端获取的业务数据。

### 核心实体

#### 1. 商品评价 (GoodReputation)

**业务含义**: 用户对商品的评价信息。

**主要属性**:

| 属性名        | 类型     | 说明                                   |
| ------------- | -------- | -------------------------------------- |
| `goodId`      | `number` | 商品唯一标识                           |
| `avatarUrl`   | `string` | 用户头像 URL                           |
| `nickName`    | `string` | 用户昵称                               |
| `rate`        | `number` | 评价星级 (1-5星)                       |
| `remark`      | `string` | 评价内容                               |
| `date`        | `string` | 评价日期 (格式: YYYY-MM-DD)            |
| `property`    | `string` | 商品属性 (如: 颜色, 尺码)              |

**业务规则**:

-   评价星级与后端评价分数之间存在转换关系。
-   用户昵称可能根据手机号进行脱敏处理。
-   评价内容为空时显示默认文案。

#### 2. 订单售后 (OrderAfterSale)

**业务含义**: 订单商品相关的售后服务信息。

**主要属性**:

| 属性名        | 类型     | 说明                                   |
| ------------- | -------- | -------------------------------------- |
| `value`       | `number` | 售后服务类型值 (0: 仅退款, 1: 退款退货, 2: 退货) |
| `label`       | `string` | 售后服务类型描述                       |
| `orderInfo`   | `Object` | 关联的订单信息                         |

**业务规则**:

-   根据售后服务类型组合生成售后服务标题。

#### 3. 订单 (Order)

**业务含义**: 用户购买商品后生成的订单信息。

**主要属性**:

| 属性名        | 类型     | 说明                                   |
| ------------- | -------- | -------------------------------------- |
| `id`          | `string` | 订单唯一标识                           |
| `goodsInfo`   | `Object` | 订单中包含的商品信息 (通常是第一个商品) |
| `...`         | `any`    | 其他订单相关属性 (待进一步分析)        |

**业务规则**:

-   订单列表数据会进行格式化处理。

#### 4. 积分抵扣规则 (ScoreDeductionRule)

**业务含义**: 积分兑换和抵扣的规则信息。

**主要属性**:

| 属性名        | 类型     | 说明                                   |
| ------------- | -------- | -------------------------------------- |
| `type`        | `number` | 规则类型 (0: 抵扣下单金额, 1: 兑换成长值, 2: 兑换现金) |
| `score`       | `number` | 所需积分数量                           |
| `money`       | `number` | 兑换金额或成长值                       |
| `label`       | `string` | 规则标题                               |
| `desc`        | `string` | 规则描述 (包含动态参数)                |
| `icon`        | `string` | 规则图标 URL                           |

**业务规则**:

-   规则描述中的占位符会根据实际积分和金额进行替换。

### 核心实体关系图

由于前端领域模型主要侧重于数据展示和转换，而非传统意义上的数据库实体关系，因此不提供 E-R 图。实体之间的关系主要通过数据结构中的嵌套和关联 ID 来体现，例如订单会关联商品信息。

### 数据流转关系

前端领域模型的数据流转主要遵循以下模式：

1.  **API 请求**: 前端通过 `src/apis` 定义的接口向后端发起请求，获取原始数据。
2.  **数据转换/格式化**: 获取到的原始数据经过 `src/model` 中定义的函数进行转换和格式化，以适应前端组件的展示需求。
3.  **状态管理**: 格式化后的数据存储在 `Pinia` 状态管理中 (`src/store`)，供各个组件共享和使用。
4.  **组件渲染**: 组件从状态管理中获取数据并渲染到 UI 界面。
5.  **用户交互**: 用户操作触发数据更新，通过 API 请求将数据发送回后端，或更新本地状态。